import*as t from"react";import e,{createContext as n,useContext as r,useLayoutEffect as o,useEffect as a,useRef as i,useCallback as s,useMemo as c,forwardRef as l,createElement as u}from"react";const f=n({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),d=n({});const m=n(null),p="undefined"!=typeof document,g=p?o:a,y=n({strict:!1});function h(t,e,n,o){const s=r(d).visualElement,c=r(y),l=r(m),u=r(f).reducedMotion,p=i();o=o||c.renderer,!p.current&&o&&(p.current=o(t,{visualState:e,parent:s,props:n,presenceId:l?l.id:void 0,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u}));const h=p.current;g(()=>{h&&h.render()});return(window.HandoffAppearAnimations?g:a)(()=>{h&&h.animationState&&h.animationState.animateChanges()}),h}function v(t,e,n){return s(r=>{var o;r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&("function"==typeof n?n(r):"object"==typeof(o=n)&&Object.prototype.hasOwnProperty.call(o,"current")&&(n.current=r))},[e])}function w(t){return"string"==typeof t||Array.isArray(t)}function b(t){return"object"==typeof t&&"function"==typeof t.start}const x=["initial","animate","exit","whileHover","whileDrag","whileTap","whileFocus","whileInView"];function S(t){return b(t.animate)||x.some(e=>w(t[e]))}function V(t){const{initial:e,animate:n}=function(t,e){if(S(t)){const{initial:e,animate:n}=t;return{initial:!1===e||w(e)?e:void 0,animate:w(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,r(d));return c(()=>({initial:e,animate:n}),[A(e),A(n)])}function A(t){return Array.isArray(t)?t.join(" "):t}const C=t=>({isEnabled:e=>t.some(t=>!!e[t])}),E={measureLayout:C(["layout","layoutId","drag"]),animation:C(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:C(["exit"]),drag:C(["drag","dragControls"]),focus:C(["whileFocus"]),hover:C(["whileHover","onHoverStart","onHoverEnd"]),tap:C(["whileTap","onTap","onTapStart","onTapCancel"]),pan:C(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:C(["whileInView","onViewportEnter","onViewportLeave"])};function T(t){const e=i(null);return null===e.current&&(e.current=t()),e.current}const k=!1;let L=1;const O=n({});class P extends e.Component{getSnapshotBeforeUpdate(){const{visualElement:t,props:e}=this.props;return t&&t.setProps(e),null}componentDidUpdate(){}render(){return this.props.children}}const W=n({}),B=Symbol.for("motionComponentSymbol");function j({preloadedFeatures:e,createVisualElement:n,projectionNodeConstructor:o,useRender:a,useVisualState:i,Component:s}){e&&function(t){for(const e in t)"projectionNodeConstructor"===e?E.projectionNodeConstructor=t[e]:E[e].Component=t[e]}(e);const c=l((function(c,l){const u={...r(f),...c,layoutId:M(c)},{isStatic:m}=u;let g=null;const w=V(c),b=m?void 0:T(()=>{if(k)return L++}),x=i(c,m);if(!m&&p){w.visualElement=h(s,x,u,n);const t=r(y).strict,a=r(W);w.visualElement&&(g=w.visualElement.loadFeatures(u,t,e,b,o||E.projectionNodeConstructor,a))}return t.createElement(P,{visualElement:w.visualElement,props:u},g,t.createElement(d.Provider,{value:w},a(s,c,b,v(x,w.visualElement,l),x,m,w.visualElement)))}));return c[B]=s,c}function M({layoutId:t}){const e=r(O).id;return e&&void 0!==t?e+"-"+t:t}const R=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function X(t){return"string"==typeof t&&!t.includes("-")&&!!(R.indexOf(t)>-1||/[A-Z]/.test(t))}const Y={},H=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],D=new Set(H);function $(t,{layout:e,layoutId:n}){return D.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!Y[t]||"opacity"===t)}const F=t=>!!(null==t?void 0:t.getVelocity),I={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z=(t,e)=>H.indexOf(t)-H.indexOf(e);function z(t){return t.startsWith("--")}const N=(t,e)=>e&&"number"==typeof t?e.transform(t):t,K={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},U={...K,transform:t=>((t,e,n)=>Math.min(Math.max(n,t),e))(0,1,t)},q={...K,default:1};const _=t=>({test:e=>function(t){return"string"==typeof t}(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),G=_("deg"),J=_("%"),Q=_("px"),tt={...J,parse:t=>J.parse(t)/100,transform:t=>J.transform(100*t)},et={...K,transform:Math.round},nt={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,size:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,rotate:G,rotateX:G,rotateY:G,rotateZ:G,scale:q,scaleX:q,scaleY:q,scaleZ:q,skew:G,skewX:G,skewY:G,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:U,originX:tt,originY:tt,originZ:Q,zIndex:et,fillOpacity:U,strokeOpacity:U,numOctaves:et};function rt(t,e,n,r){const{style:o,vars:a,transform:i,transformKeys:s,transformOrigin:c}=t;s.length=0;let l=!1,u=!1,f=!0;for(const t in e){const n=e[t];if(z(t)){a[t]=n;continue}const r=nt[t],d=N(n,r);if(D.has(t)){if(l=!0,i[t]=d,s.push(t),!f)continue;n!==(r.default||0)&&(f=!1)}else t.startsWith("origin")?(u=!0,c[t]=d):o[t]=d}if(e.transform||(l||r?o.transform=function({transform:t,transformKeys:e},{enableHardwareAcceleration:n=!0,allowTransformNone:r=!0},o,a){let i="";e.sort(Z);for(const n of e)i+=`${I[n]||n}(${t[n]}) `;return n&&!t.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(t,o?"":i):r&&o&&(i="none"),i}(t,n,f,r):o.transform&&(o.transform="none")),u){const{originX:t="50%",originY:e="50%",originZ:n=0}=c;o.transformOrigin=`${t} ${e} ${n}`}}const ot=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}});function at(t,e,n){for(const r in e)F(e[r])||$(r,n)||(t[r]=e[r])}function it(t,e,n){const r={};return at(r,t.style||{},t),Object.assign(r,function({transformTemplate:t},e,n){return c(()=>{const r={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};return rt(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}(t,e,n)),t.transformValues?t.transformValues(r):r}function st(t,e,n){const r={},o=it(t,e,n);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=o,r}const ct=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","viewport"]);function lt(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||ct.has(t)}let ut=t=>!lt(t);try{(ft=require("@emotion/is-prop-valid").default)&&(ut=t=>t.startsWith("on")?!lt(t):ft(t))}catch(t){}var ft;function dt(t,e,n){return"string"==typeof t?t:Q.transform(e+n*t)}const mt={offset:"stroke-dashoffset",array:"stroke-dasharray"},pt={offset:"strokeDashoffset",array:"strokeDasharray"};function gt(t,{attrX:e,attrY:n,originX:r,originY:o,pathLength:a,pathSpacing:i=1,pathOffset:s=0,...c},l,u,f){if(rt(t,c,l,f),u)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:d,style:m,dimensions:p}=t;d.transform&&(p&&(m.transform=d.transform),delete d.transform),p&&(void 0!==r||void 0!==o||m.transform)&&(m.transformOrigin=function(t,e,n){return`${dt(e,t.x,t.width)} ${dt(n,t.y,t.height)}`}(p,void 0!==r?r:.5,void 0!==o?o:.5)),void 0!==e&&(d.x=e),void 0!==n&&(d.y=n),void 0!==a&&function(t,e,n=1,r=0,o=!0){t.pathLength=1;const a=o?mt:pt;t[a.offset]=Q.transform(-r);const i=Q.transform(e),s=Q.transform(n);t[a.array]=`${i} ${s}`}(d,a,i,s,!1)}const yt=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}}),ht=t=>"string"==typeof t&&"svg"===t.toLowerCase();function vt(t,e,n,r){const o=c(()=>{const n={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}};return gt(n,e,{enableHardwareAcceleration:!1},ht(r),t.transformTemplate),{...n.attrs,style:{...n.style}}},[e]);if(t.style){const e={};at(e,t.style,t),o.style={...e,...o.style}}return o}function wt(t=!1){return(e,n,r,o,{latestValues:a},i)=>{const s=(X(e)?vt:st)(n,a,i,e),l={...function(t,e,n){const r={};for(const o in t)"values"===o&&"object"==typeof t.values||(ut(o)||!0===n&&lt(o)||!e&&!lt(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}(n,"string"==typeof e,t),...s,ref:o},{children:f}=n,d=c(()=>F(f)?f.get():f,[f]);return r&&(l["data-projection-id"]=r),u(e,{...l,children:d})}}const bt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xt(t,e,n,r){!function(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const e in n)t.style.setProperty(e,n[e])}(t,e,void 0,r);for(const n in e.attrs)t.setAttribute(bt.has(n)?n:n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.attrs[n])}function St(t,e){const{style:n}=t,r={};for(const o in n)(F(n[o])||e.style&&F(e.style[o])||$(o,t))&&(r[o]=n[o]);return r}function Vt(t){const e=F(t)?t.get():t;return n=e,Boolean(n&&"object"==typeof n&&n.mix&&n.toValue)?e.toValue():e;var n}const At=t=>(e,n)=>{const o=r(d),a=r(m),i=()=>function({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,o,a){const i={latestValues:Ct(r,o,a,t),renderState:e()};return n&&(i.mount=t=>n(r,t,i)),i}(t,e,o,a);return n?i():T(i)};function Ct(t,e,n,r){const o={},a=r(t,{});for(const t in a)o[t]=Vt(a[t]);let{initial:i,animate:s}=t;const c=S(t),l=function(t){return Boolean(S(t)||t.variants)}(t);e&&l&&!c&&!1!==t.inherit&&(void 0===i&&(i=e.initial),void 0===s&&(s=e.animate));let u=!!n&&!1===n.initial;u=u||!1===i;const f=u?s:i;if(f&&"boolean"!=typeof f&&!b(f)){(Array.isArray(f)?f:[f]).forEach(e=>{const n=function(t,e,n,r={},o={}){return"function"==typeof e&&(e=e(void 0!==n?n:t.custom,r,o)),"string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e&&(e=e(void 0!==n?n:t.custom,r,o)),e}(t,e);if(!n)return;const{transitionEnd:r,transition:a,...i}=n;for(const t in i){let e=i[t];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(o[t]=e)}for(const t in r)o[t]=r[t]})}return o}const Et={useVisualState:At({scrapeMotionValuesFromProps:function(t,e){const n=St(t,e);for(const r in t)if(F(t[r])||F(e[r])){n["x"===r||"y"===r?"attr"+r.toUpperCase():r]=t[r]}return n},createRenderState:yt,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(t){n.dimensions={x:0,y:0,width:0,height:0}}gt(n,r,{enableHardwareAcceleration:!1},ht(e.tagName),t.transformTemplate),xt(e,n)}})},Tt={useVisualState:At({scrapeMotionValuesFromProps:St,createRenderState:ot})};const kt=function(t){function e(e,n={}){return j(t(e,n))}if("undefined"==typeof Proxy)return e;const n=new Map;return new Proxy(e,{get:(t,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}((function(t,{forwardMotionProps:e=!1},n,r,o){return{...X(t)?Et:Tt,preloadedFeatures:n,useRender:wt(e),createVisualElement:r,projectionNodeConstructor:o,Component:t}}));export{kt as m};
